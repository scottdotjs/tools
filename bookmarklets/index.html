<!DOCTYPE html>
<html lang=en>
<meta charset=UTF-8 />
<title>Scott's Bookmarklets</title>

<!--
Syntax highlighting provided by HighlightJS.
https://highlightjs.org/
-->
<link rel=stylesheet href=js/highlight/styles/monokai-sublime.min.css />
<link rel=stylesheet href=styles.css />

<body>

<header>
	<nav>
		<ul>
			<li>
				<a href=https://scottdotjs.github.io/tools/>Scott's Tools</a>
			</li>
			<li>
				<a aria-current=page href=https://scottdotjs.github.io/tools/bookmarklets>Bookmarklets</a>
			</li>
		</ul>
	</nav>
</header>

<main>

<h1>Scott's Bookmarklets</h1>

<table>
	<tr>
		<td colspan=2>
			<p>
				<strong>Bookmarklets</strong> are snippets of JavaScript code that live in your desktop browser&rsquo;s bookmarks toolbar. The difference from regular bookmarks is that they perform some action when you click on them instead of taking you to a fixed web address. That could be pretty much any kind of interaction with the page you're looking at, or even modifying it.
			</p>
			<p>
				To save a bookmarklet from below, drag its yellow button onto your bookmarks toolbar. The code for each is shown below for anyone interested in seeing how they work, but you can ignore it.
			</p>

			<p>
				This collection was inspired by the legendary <a href=https://www.squarefree.com/bookmarklets/>Jesse's Bookmarklets</a>, by Jesse Ruderman, which has been online since the year 2000 and is still useful.
			</p>
		</td>
	</tr>
	<tr>
		<th colspan=2>
			<h2>Facebook</h2>
			<p>
				Facebook gives you some ability to reduce how much their advertising system profiles you, but deliberately makes it tiresome (involving a lot of manual clicking) to try and discourage you. These bookmarklets allow you to click all the buttons at once.
			</p>
		</th>
	</tr>
	<tr>
		<td class=bookmarklet>
			<a href="javascript:let%20seeMore=document.querySelector('div[aria-label=%22See More%22]');if(seeMore)seeMore.click();setTimeout(()=>{Array.from(document.querySelectorAll('div[aria-label=%22Hide Ads%22]')).forEach(button=>button.click())},500);void%200">Hide every recent advertiser</a>
		</td>
		<td class=description>
			Use on the <a href=https://www.facebook.com/adpreferences/advertisers/>recent advertisers</a> page in your settings.
		</td>
	</tr>
	<tr>
		<td colspan=2>
			<pre><code class=language-javascript>let seeMore = document.querySelector('div[aria-label="See More"]')
if (seeMore) seeMore.click()

setTimeout(() => {
	Array.from(document.querySelectorAll('div[aria-label="Hide Ads"]'))
		.forEach(button => button.click())
}, 500)

void 0
</code></pre>
		</td>
	</tr>
	<tr>
		<td class=bookmarklet>
			<a href="javascript:let%20seeAll=document.querySelector('div[aria-label=%22See%20All%20Interests%22]');if(seeAll)seeAll.click();setTimeout(()=>{Array.from(document.querySelectorAll('div[aria-label=%22Remove%22]')).forEach(button=>button.click())},500);void%200">Remove all interest categories</a>
		</td>
		<td class=description>
			Use on: <a href=https://www.facebook.com/adpreferences/ad_settings>ad settings</a> &rarr; categories used to reach you &rarr; interest categories. (It's impossible to link directly to that page)
		</td>
	</tr>
	<tr>
		<td colspan=2>
			<pre><code class=language-javascript>let seeAll = document.querySelector('div[aria-label="See All Interests"]')
if (seeAll) seeAll.click()

setTimeout(() => {
	Array.from(document.querySelectorAll('div[aria-label="Remove"]'))
		.forEach(button => button.click())
}, 500)

void 0
</code></pre>
		</td>
	</tr>
	<tr>
		<th colspan=2>
			<h2>Twitter</h2>
		</th>
	</tr>
	<tr>
		<td class=bookmarklet>
			<a href="javascript:(function()%20{window.open(document.getElementsByTagName('video')[0].src,'video')})()">Get GIF from a tweet</a>
		</td>
		<td class=description>
			Use on: view of an individual tweet. Opens the animation in a new window. Note: Twitter labels them as GIFs but they're actually MP4 video files. If you want to convert them to actual GIFs, you can <a href=https://homehack.nl/create-animated-gifs-from-mp4-with-ffmpeg/>do it easily with FFmpeg</a>.
		</td>
	</tr>
	<tr>
		<td colspan=2>
			<pre><code class=language-javascript>(function() {
	window.open(document.getElementsByTagName('video')[0].src, 'video')
})()
</code></pre>
		</td>
	</tr>
	<tr>
		<th colspan=2>
			<h2>Other sites: Navigation</h2>
		</th>
	</tr>
	<tr>
		<td class=bookmarklet>
			<a href="javascript:let%20q=''+(window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection.createRange().text);if%20(!q)%20q=prompt('Enter an npm package name:','');if%20(q!==null)%20location='https://npmjs.com/package/'+escape(q).replace(/ /g,%20'+');void 0">Go to npm package</a>
		</td>
		<td>
			Use anywhere to quickly get to an <a href=https://npmjs.com/>npm</a> package page. Click to bring up a dialog box, enter the name of a package. Alternatively, highlight a package name on any page and click. This is adapted from Jesse's Google search bookmarklet.
		</td>
	</tr>
	<tr>
		<td colspan=2>
			<pre><code class=language-javascript>let q = '' + (
	window.getSelection
		? window.getSelection()
		: document.getSelection
			? document.getSelection()
			: document.selection.createRange().text
		)

if (!q) q = prompt('Enter an npm package name', '')

if (q !== null) location = 'https://npmjs.com/package' + escape(q).replace(/ /g, '+')

void 0
</code></pre>
		</td>
	</tr>
	<tr>
		<td class=bookmarklet>
			<a href="javascript:location='http://wayback.archive.org/web/*/'+location">See in Wayback Machine</a>
		</td>
		<td class=description>
			Use on: any web page.
		</td>
	</tr>
	<tr>
		<td colspan=2>
			<pre><code class=language-javascript>location = 'http://wayback.archive.org/web/*/' + location
</code></pre>
		</td>
	</tr>
	<tr>
		<td class=bookmarklet>
			<a href="javascript:const%20monthsIndex=new%20Map();[...Array(12).keys()].map(monthNum=>new%20Date(0,monthNum).toLocaleString('en',{month:'short'})).forEach((month,index)=>{monthsIndex.set(month,%20index%20+%201);monthsIndex.set(index%20+%201,%20month)
});function%20changeMonth(input,dir){const%20incOrDec=val=>dir==='next'?++val:--val;let[,year,month]=input.match(/(.{4})(.{3})/);let%20index=monthsIndex.get(month);if((dir==='prev'&&index===1)||(dir==='next'&&index%20===%2012)){index=index===12?1:12;year=incOrDec(year)}else{index=incOrDec(index)}return`${year}${monthsIndex.get(index)}`}const%20yearAndMonth=document.URL.match(/(\d{4}...)/)[0];if(yearAndMonth){document.location.href=document.URL.replace(yearAndMonth,changeMonth(yearAndMonth,'prev'))}">Previous month</a>&nbsp;<a href="javascript:const%20monthsIndex=new%20Map();[...Array(12).keys()].map(monthNum=>new%20Date(0,monthNum).toLocaleString('en',{month:'short'})).forEach((month,index)=>{monthsIndex.set(month,%20index%20+%201);monthsIndex.set(index%20+%201,%20month)
});function%20changeMonth(input,dir){const%20incOrDec=val=>dir==='next'?++val:--val;let[,year,month]=input.match(/(.{4})(.{3})/);let%20index=monthsIndex.get(month);if((dir==='prev'&&index===1)||(dir==='next'&&index%20===%2012)){index=index===12?1:12;year=incOrDec(year)}else{index=incOrDec(index)}return`${year}${monthsIndex.get(index)}`}const%20yearAndMonth=document.URL.match(/(\d{4}...)/)[0];if(yearAndMonth){document.location.href=document.URL.replace(yearAndMonth,changeMonth(yearAndMonth,'next'))}">Next month</a>
		</td>
		<td class=description>
			Use on: email list archive monthly view pages with <samp>yyyyMmm</samp> dates in their URLs, as produced by some variety of old archivers. Those pages don&rsquo;t have links to the previous and next month, so these bookmarklets let you navigate between them.
			<p>
			The buttons below demonstrate how the bookmarklets change the date in the URL for one of those pages.
			<p>
			<a class=navigator-demo href=https://lists.w3.org/Archives/Public/www-style/1996Dec/thread.html target=_new>https://lists.w3.org/Archives/Public/www-style/1996Dec/thread.html</a>
			<p>
			<button id=navigator-demo-prev>Previous month</button>
			<button id=navigator-demo-next>Next month</button>
		</td>
	</tr>
	<tr>
		<td colspan=2>
			<pre><code class=language-javascript>const monthsIndex = new Map();

[ ...Array(12).keys() ]
	.map(monthNum =>
		new Date(0, monthNum).toLocaleString('en', { month: 'short' })
	)
	.forEach((month, index) => {
		monthsIndex.set(month, index + 1)
		monthsIndex.set(index + 1, month)
	})

function changeMonth (input, dir) {
	const incOrDec = val => dir === 'next' ? ++val : --val

	let [ , year, month ] = input.match(/(.{4})(.{3})/)

	let index = monthsIndex.get(month)

	if ((dir === 'prev' && index === 1) || (dir === 'next' && index === 12)) {
		index = index === 12 ? 1 : 12
		year = incOrDec(year)
	} else
		index = incOrDec(index)

	return `${year}${monthsIndex.get(index)}`
}

const yearAndMonth = document.URL.match(/(\d{4}...)/)[0];

if (yearAndMonth)
	document.location.href = document.URL.replace(yearAndMonth, changeMonth(yearAndMonth, 'next'))
</code></pre>
		</td>
</table>

</main>

<script type=module>
	import { navigate } from './js/monthArchiveNavigator.js'
	const link = document.querySelector('.navigator-demo')
	document.querySelector('#navigator-demo-prev').addEventListener('click', () => navigate(link, 'prev'))
	document.querySelector('#navigator-demo-next').addEventListener('click', () => navigate(link, 'next'))
</script>

<script type=module>
	import hljs from './js/highlight/highlight.js'
	import javascript from './js/highlight/languages/javascript.min.js'
	hljs.registerLanguage('javascript', javascript)
	hljs.highlightAll()
</script>

</body>

</html>
